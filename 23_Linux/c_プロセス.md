# プロセス

## 分岐操作

分岐は、プロセスが自身のコピーを作成できるようにするためにカーネルが使用する方法であり、

Linuxでは新しいプロセスを作成する唯一の方法である。

> プロセス
>
> >プログラム実行中のインスタンス

プロセスが分岐を呼び出すと、呼び出し元プロセスは親プロセスになり、新たに作成されたプロセスはその子プロセスになる。

分岐の後、プロセスは一定の独立性を維持したプロセスになり、それぞれが異なるプロセス ID を持つが、同一のプログラムコードを実行する。

## プロセス管理コマンド

### ps

呼び出し時にコンピュータ上で実行されているプロセスを一覧表示するために使用される。

psには、現在のユーザまたは他のユーザに属している実行中のプロセスを表示するように指定できる。

プロセスの一覧表示のためにルート権限は必要がないが、他のユーザのプロセスの終了または変更するにはルート権限が必要。

### top

このコマンドは実行中のプロセスの一覧表示に使用されるが、

psとは異なり、実行中のプロセスが動的に表示され続ける。

topを終了するにはqを押す。

### kill

このコマンドは、特定のプロセスの動作を変更するために使用される。

パラメータに応じて、killコマンドによってプロセスは削除、再起動、または一時停止される。

多くの場合、killを実行する前にユーザはpsまたはtopを実行し、プロセスのPIDを把握してからkillを実行する。

## ルートキット

> ルートキット
>
> >ユーザの権限の昇格や、通常は許可されるべきでないソフトウェアの要素へのアクセスを許可するために、設計されたソフトウェアツールセット。
> >
> >ルートキットは、侵害されたコンピュータへのバックドアを確保するためにも頻繁に使用される。



ルートキットのインストールは（感染の一環として）自動化することも、コンピュータを侵害した後に攻撃者が手動で行うこともできる。

ルートキットは、カーネル コードとそのモジュールを改変し、OS自体の最も根本的な操作を変更するため、大きな打撃をもたらす。

このように深いレベルまで侵害できるルートキットは、侵入を隠匿し、インストールのあらゆる痕跡を削除する。

さらに、トラブルシューティングや診断用のツールの出力にルートキットの存在が現れないように、こうしたツールを改ざんすることも可能。

通常のユーザ アカウントを介したルートキットのインストールを許したLinuxの脆弱性はいくつか存在するが、

大半のルートキットが侵害を達成するためには、ルートまたは管理者アクセスが必要である。



ルートキットはコンピュータの基盤を侵害するため、ルートキットの検出は非常に困難になりかねない。

一般的な検出方法には、診断オペレーティングシステムライブCDのような信頼できるメディアからのコンピュータの起動がある。

侵害されたドライブがマウントされていている場合は、

信頼できるシステムのツールセットから、信頼できる診断ツールを起動して侵害を受けたファイル システムを検査できる。

検査方法には、動作ベースの方法、シグネチャスキャン、差異スキャン、およびメモリダンプの分析などがある。



ルートキットの排除は、複雑で不可能になることも珍しくない。

特にルートキットがカーネルに存在する場合は、確実な解決策はオペレーティング システムの再インストールしかない。

ファームウェアルートキットを排除するには、通常ハードウェアの交換が必要になる。



chkrootkitは人気の高いLinuxベースのプログラムで、コンピュータ内の既知のルートキットの有無をチェックするように設計されている。

chkrootkitは、コアプログラムのシグネチャを比較するためにstringsやgrepなどの一般的なLinuxツールを使用するシェルスクリプトである。

/procファイルシステムを横断し、そこで見つかったシグネチャとpsの出力を比較して不一致も探します。

このプログラムは有益ですが、==ルートキットのチェックは100%確実ではない==。

## パイプ

パイプと呼ばれる技法によって多くのコマンドを組み合わせ、より複雑なタスクを実行することができる。

パイプ`|`は、つなげられた一連のコマンドで構成され、1つのコマンドの出力を別のコマンドの入力に渡す。

```shell
cat aaa.txt | grep "sshd" | grep "failed"
```

