# イベント



## イベント発生時に処理を行う

* イベントドリブン

  イベントが発生した時、発生したイベントをトリガー(きっかけ)として処理を実行するプログラムの実行形式

* イベントドリブンモデル

  イベントドリブンを採用しているプログラムモデルのこと。
  ユーザーが何もしない限り、待機状態が続くので、プログラム側でユーザーを必要以上に拘束しない特徴がある



## イベントハンドラー

イベントに対して処理を定義。イベントと**１対１**で定義

* onload

  HTMLをロード完了した時。<head>にプログラムを記述するときに必要

  `window.onload = function(){ ... }`

* onclick

* onmouseover

* onmouseout

* onblur

* onfocus

* onchange

* など

**要素のタグ内で定義**

```html
<input type="button" value="aaa" onClick="func01()">
```

**要素オブジェクトのプロパティで定義**

```javascript
/* 要素オブジェクト.onイベント名 = function(イベント){ 処理内容 }; */
window.onload = function(){     // ここ
  var button01 = document.getElementById("button");
  button01.onclick = function(){};//ここ
  button01.onclick = null;		// イベントハンドラ削除
}
```



## イベントリスナー

イベントと処理を結びつける。イベントと１対１以上で定義できる
要素オブジェクトのaddEventListenerメソッドで定義

1. **追加**

   ```javascript
   /* 要素オブジェクト.addEventListener(   イベント名, function(イベント){処理内容}   ); */
   // 例
   window.addEventListener("DOMContentLoaded",
     function(){
       var button01 = document.getElementById("button");
       button01.addEventListener("click", function(){
         window.alert("クリックしました！");
       });
       button01.addEventListener("click", function(){
         window.alert("もう一度アラートを出します！");
       });
   });
   // loadイベントはHTML,CSSや画像を読み終えた時に発生。DOMContentLoadedイベントはHTMLを読み終えた時に発生
   ```

2. **削除**

   ```javascript
   removeEventListener(イベント名, リスナー関数)
   // リスナー関数を取り除く
   ```

3. **イベントをキャンセル**

   ```javascript
   /* イベントオブジェクト.preventDefault() */
   window.addEventListener("DOMContentLoaded", function(){
     var link01 = document.getElementById("link");
     link01.addEventListener("click", function(event){    // 発生したイベントを受け取るために、引数にeventを渡す
       // 既定のイベントをキャンセル
       event.preventDefault();
       window.alert("リンクがクリックされました！");
     });
   });
   ```

4. **その他の知識**

   ```javascript
   // 「this」でイベント発生元の要素にアクセスする
   var img01 = document.getElementById("catImg");
   img01.addEventListener("mouseover", function(event){
     this.src = "images/01.jpg";
   });
   img01.addEventListener("mouseout", function(event){
     this.src = "images/02.jpg";
   });
   ```



**よく利用されるイベント**

* load

  読み込みが終わった時に発生するイベント

* click

  クリックされた時に発生するイベント

* mouseover

  マウスカーソルが乗った時に発生するイベント

* mouseout

  マウスカーソルが外れた時に発生するイベント

* change

  値が変わった時に発生するイベント























