# ラムダ式



## ラムダ式

ほとんどの場合、関数の実引数 or `auto`で宣言した変数に代入して使う

```c++
[](型 仮引数名, 型 仮引数名, ...) -> 戻り値の型 {
   // ...
}

// 「-> 戻り値の型」を省略可能
auto show = [](string s) -> void {
	cout << s << endl;
};
show("Hello world!");
```



### 変数キャプチャ

普通の関数もラムダ式も、引数以外の関数外変数を使えない。

しかし、ラムダ式の変数キャプチャ機能を使えば、

ラムダ式の外側で宣言された変数のコピーを格納し、内部で使えるようになる

引数の受け取るのと違って、ラムダ式を呼び出す際に渡す必要がない

先頭に`=`を記述すれば、内部で使っている変数を、コンパイラが自動的にキャプチャする

```c++
[変数, ...](引数) -> 戻り値の型 {
   // ...
}
[=, 変数, ...](引数) -> 戻り値の型 {
   // ...
}

int main(){
   int a = 0;
   auto lamda = [a](){   cout << a << endl;   };
   lamda();		// 0
   a = 42;
   lamda();		// 0
}
```

コピーとしてキャプチャした変数は暗黙的に`const`となる

変更する必要がある場合、`mutable -> 戻り値の型`と指定すれば良い

しかしmutableは全てのキャプチャした変数に影響するので、注意すべきだ

これを使う機会がほとんどないかもしれない



### 参照を取得するキャプチャ

```c++
[&変数, ...](引数) -> 戻り値の型 {
   // ...
}
[&, &変数, ...](引数) -> 戻り値の型 {
   // ...
}
```

