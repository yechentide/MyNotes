# プロトコル



## プロトコル



クラスが必ず実装しなければならないプロパティやメソッドを指定した仕様書

Javaのinterfaceと同じ

プロトコル内では、プロパティの初期値やメソッドの内容を定義しない

他のプロトコルを継承できる

構造体、列挙型、クラスに使える



### 宣言の概要

プロトコルに含められる宣言

`{get set}`は読み書き可能、`{get}`はread only

関数の前に`optional`をつけると、その関数を必ずしも実装しなくても良い

構造体と同じ、インスタンスメソッドで、インスタンス変数やselfを書き換える場合、それの前に`mutating`をつける

```swift
protocol 名前: プロトコル1, プロトコル2, ... {
   
   static var プロパティ: 型 {get set}			// 「set」は省略可能
   static func メソッド(引数) -> 型		  	  // 「引数」と「-> 型」は省略可能
   static 演算子種別 func 演算子(引数) -> 型   // 「演算子種別」
   
   init(引数)											// 「引数」は省略可能
   subscript(引数) -> 型 {get set}			  // 「set」は省略可能
   typealias 別名 = 型名
   associatedtype 識別子
   
}
```

プロトコルで`{get}`で指定しても、実装時に読み書き可能にしても問題ない



### プロトコルの準拠

```swift
class クラス名: スーパークラス, プロトコル, ... {}
```



### プロトコルの合成

```swift
var 方法1: P1 & P2

protocol NewProtocol: P1, P2{}
var 方法2: NewProtocol
```





### プロトコルを型として使う

プロトコルを型として使える

そうすると、そのプロトコルに準拠したインスタンスを扱えるようになる

その時、インスタンスの中の、プロトコルに宣言されてないものは使えない



### 付属型の宣言

構造体やクラスなど、定義内にネスト型を定義するように、プロトコルも付属型を指定できる

`associatedtype`キーワードを使って付属型を宣言する

この宣言はプロトコル定義内にのみ記述できる

```swift
protocol 名前 {
   associatedtype 型名(クラス＆構造体など)
   var x: 上の型名 { get set }
}
```















